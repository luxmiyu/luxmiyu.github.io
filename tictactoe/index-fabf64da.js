var R=Object.defineProperty;var $=(t,e,r)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var S=(t,e,r)=>($(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const k=[{dark:"eaeaea",light:"2a2a2a",name:"text"},{dark:"bababa",light:"5a5a5a",name:"text-secondary"},{dark:"cd435c",light:"e86880",name:"selection"},{dark:"eaeaea",light:"2a2a2a",name:"selection-text"},{dark:"1a1a1a",light:"eaeaea",name:"background"},{dark:"222222",light:"dedede",name:"background-accent"},{dark:"3a3a3a",light:"d2d2d2",name:"shadow"},{dark:"8a8a8a",light:"8a8a8a",name:"hr"},{dark:"2a2a2a",light:"d8d8d8",name:"button"},{dark:"bababa",light:"5a5a5a",name:"button-border"},{dark:"3a3a3a",light:"eaeaea",name:"button-hover"},{dark:"5a5a5a",light:"fafafa",name:"button-active"},{dark:"8a8a8a",light:"fafafa",name:"button-disabled"},{dark:"2a2a2a",light:"d8d8d8",name:"input"},{dark:"5a5a5a",light:"8a8a8a",name:"input-border"},{dark:"eaeaea",light:"5a5a5a",name:"scrollbar-thumb"},{dark:"1a1a1a",light:"eaeaea",name:"scrollbar-track"},{dark:"bababa",light:"eaeaea",name:"range"},{dark:"3a3a3a",light:"aaaaaa",name:"range-border"},{dark:"3a3a3a",light:"aaaaaa",name:"range-background"}],h=document.getElementById("theme-toggle");h&&h.addEventListener("click",()=>{A()});document.addEventListener("keydown",t=>{t.altKey&&t.key==="l"&&A()});function A(){localStorage.setItem("theme",localStorage.getItem("theme")==="dark"?"light":"dark"),x()}let P="";function x(){let t=localStorage.getItem("theme")==="light"?"light":"dark";localStorage.setItem("theme",t),h&&(t==="dark"?h.innerHTML="switch to light theme ðŸŒž":h.innerHTML="switch to dark theme ðŸŒš");for(let e in k){let r=k[e].name,n=k[e][t];document.documentElement.style.setProperty(`--color-${r}`,`#${n}`)}P=t}x();setInterval(()=>{P!==localStorage.getItem("theme")&&x()},500);function q(t){return t.split("")}class f{constructor(e){S(this,"board",Array(9).fill(" "));e&&(this.board=q(e))}static from(e){return new f(e.toString())}toString(){return this.board.join("")}getBoard(){return this.board}set(e,r){return this.board[e]=r,this}get(e){return this.board[e]}reset(){this.board=Array(9).fill(" ")}checkWin(){const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const r of e){const[n,a,o]=r;if(this.board[n]!==" "&&this.board[n]===this.board[a]&&this.board[n]===this.board[o])return this.board[n]}return" "}getAvailableMoves(){const e=[];for(let r=0;r<this.board.length;r++)this.board[r]===" "&&e.push(r);return e}count(){return this.board.filter(e=>e!==" ").length}isFull(){return this.count()===9}isDraw(){return this.checkWin()===" "&&this.isFull()}randomMove(){const e=this.getAvailableMoves();return e[Math.floor(Math.random()*e.length)]}isValidMove(e){return this.board[e]===" "}evaluate(e,r=1,n=9){const a=this.checkWin();if(a==="x")return 10-r;if(a==="o")return r-10;if(this.isDraw())return 0;if(r===n)return 0;const o=this.getAvailableMoves(),i=[];for(const y of o){const u=f.from(this).set(y,e).evaluate(e==="x"?"o":"x",r+1,n);i.push(u)}return e==="x"?Math.max(...i):Math.min(...i)}bestMove(e,r=9){const n=this.getAvailableMoves(),a=[];for(const l of n){const D=f.from(this).set(l,e).evaluate(e==="x"?"o":"x",1,r);a.push(D)}const o=Math.max(...a),i=[];for(let l=0;l<a.length;l++)a[l]===o&&i.push(l);const y=i[Math.floor(Math.random()*i.length)],w=Math.min(...a),u=[];for(let l=0;l<a.length;l++)a[l]===w&&u.push(l);const X=u[Math.floor(Math.random()*u.length)];return e==="x"?n[y]:n[X]}}const d=document.querySelectorAll(".cell"),O=document.getElementById("main"),M=document.getElementById("prompt"),v=document.getElementById("player-x"),p=document.getElementById("player-o"),K=document.getElementById("reset");function C(){return v.value==="human"}function H(){return p.value==="human"}const V="https://cdn.glitch.global/e5143343-dba7-4602-8cff-d021bb699e44/cross.svg?v=1702236875948",Y="https://cdn.glitch.global/e5143343-dba7-4602-8cff-d021bb699e44/circle.svg?v=1702236924769";let g=null,b=null;async function j(){if(g=await E(V),b=await E(Y),!g||!b)throw new Error("Failed to load assets");m("PLAY")}j();function E(t){return fetch(t).then(e=>e.text())}function z(t){return Array.from(d).indexOf(t)}function m(t){M.innerHTML=t,O.classList.add("disabled"),p.disabled=!1,v.disabled=!1}function G(){M.innerHTML="",O.classList.remove("disabled"),p.disabled=!0,v.disabled=!0}function J(t){d[t].classList.add("hover")}function Q(t){d[t].classList.remove("hover")}function U(){d.forEach(t=>t.classList.remove("hover"))}async function Z(t){return new Promise(e=>setTimeout(e,t))}const c=new f;let s="x";function _(){return s==="x"?v.value:p.value}function W(){d.forEach((e,r)=>{const n=c.get(r);n===" "?e.innerHTML="":n==="x"?e.innerHTML=g:n==="o"&&(e.innerHTML=b)});const t=c.checkWin();t==="x"?m("X WINS"):t==="o"?m("O WINS"):c.isFull()&&m("DRAW")}function B(t,e){c.set(t,e),W()}function F(){c.reset(),s="x",U(),W()}function L(){const t=!C()&&s==="x",e=!H()&&s==="o";return(t||e)&&!c.isFull()&&c.checkWin()===" "}function N(){s=s==="x"?"o":"x"}function T(t){const e=z(t);c.get(e)===" "&&(B(e,s),N(),L()&&I())}d.forEach(t=>{t.addEventListener("click",()=>{C()&&s==="x"&&T(t),H()&&s==="o"&&T(t)})});M.addEventListener("click",()=>{!g||!b||(F(),G(),L()&&I())});async function I(){let t=c.randomMove();switch(_()){case"hard":t=c.bestMove(s,2);break;case"impossible":t=c.bestMove(s);break}if(J(t),await Z(100),Q(t),B(t,s),N(),L()){I();return}}K.addEventListener("click",()=>{F(),m("PLAY")});
