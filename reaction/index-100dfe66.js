(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const h=[{dark:"eaeaea",light:"2a2a2a",name:"text"},{dark:"bababa",light:"5a5a5a",name:"text-secondary"},{dark:"cd435c",light:"e86880",name:"selection"},{dark:"eaeaea",light:"2a2a2a",name:"selection-text"},{dark:"1a1a1a",light:"eaeaea",name:"background"},{dark:"222222",light:"dedede",name:"background-accent"},{dark:"3a3a3a",light:"d2d2d2",name:"shadow"},{dark:"8a8a8a",light:"8a8a8a",name:"hr"},{dark:"2a2a2a",light:"d8d8d8",name:"button"},{dark:"bababa",light:"5a5a5a",name:"button-border"},{dark:"3a3a3a",light:"eaeaea",name:"button-hover"},{dark:"5a5a5a",light:"fafafa",name:"button-active"},{dark:"8a8a8a",light:"fafafa",name:"button-disabled"},{dark:"2a2a2a",light:"d8d8d8",name:"input"},{dark:"5a5a5a",light:"8a8a8a",name:"input-border"},{dark:"eaeaea",light:"5a5a5a",name:"scrollbar-thumb"},{dark:"1a1a1a",light:"eaeaea",name:"scrollbar-track"},{dark:"bababa",light:"eaeaea",name:"range"},{dark:"3a3a3a",light:"aaaaaa",name:"range-border"},{dark:"3a3a3a",light:"aaaaaa",name:"range-background"},{dark:"e26f80",light:"f4899d",name:"checkbox-background"},{dark:"5cd778",light:"5cd778",name:"flash"},{dark:"eeb456",light:"efbf73",name:"fake"},{dark:"cd435c",light:"e86880",name:"prefire"}],f=document.getElementById("theme-toggle");f&&f.addEventListener("click",()=>{S()});document.addEventListener("keydown",e=>{e.altKey&&e.key==="l"&&S()});function S(){localStorage.setItem("theme",localStorage.getItem("theme")==="dark"?"light":"dark"),p()}let v="";function p(){let e=localStorage.getItem("theme")==="light"?"light":"dark";localStorage.setItem("theme",e),f&&(e==="dark"?f.innerHTML="switch to light theme ðŸŒž":f.innerHTML="switch to dark theme ðŸŒš");for(let t in h){let n=h[t].name,s=h[t][e];document.documentElement.style.setProperty(`--color-${n}`,`#${s}`)}v=e}p();setInterval(()=>{v!==localStorage.getItem("theme")&&p()},500);const O=1e3,R=5e3,H=.5,P=300,o=document.getElementById("area"),W=document.getElementById("reset"),T=document.getElementById("check-fake"),r=[],l=[];let u=!1,y=-1,E=-1,L=-1,x=-1;function N(){return T.checked}function w(){return Math.floor(Math.random()*(R-O))+O}for(let e=0;e<7;e++){const t=document.getElementById(`result-${e}`);l.push(t)}function _(){d(),o.classList.add("flash"),o.innerText="PRESS NOW"}function C(){d(),o.classList.add("fake"),o.innerText="FAKE FLASH"}function U(){d(),o.classList.add("prefire")}function d(){o.classList.remove("flash"),o.classList.remove("fake"),o.classList.remove("prefire")}function g(e,t){e<0||e>=l.length||(l[e].innerText=t)}function k(e,t){e<0||e>=l.length||(t?l[e].classList.add("disabled"):l[e].classList.remove("disabled"))}function Y(){for(let e=0;e<l.length;e++)g(e,""),k(e,!1)}function B(e,t=!1){if(r.length>=7)return;const n=r.length;r.push(e),g(n,`${e}ms`),t&&g(n,`${e}ms*`)}function $(){clearTimeout(L),clearTimeout(x)}function I(){d(),Y(),$(),r.length=0,u=!1,o.innerText="Press to start",T.disabled=!1,y=-1,E=-1,L=-1,x=-1}function D(){u=!0,o.innerText="WAIT FOR GREEN",d();const e=performance.now(),[t,n]=[w(),w()],s=Math.max(t,n),a=Math.min(t,n);y=e+s,E=e+a,L=setTimeout(_,s),N()&&Math.random()<H&&(x=setTimeout(C,a))}function b(){if(r.length>=7){I();return}if(!u){r.length===0&&(T.disabled=!0),D();return}const e=performance.now();let t=Math.round(e-E),n=Math.round(e-y),s=!1;if(N()&&n<0&&t>0&&(n=t+P,s=!0),u=!1,$(),n<0)U(),o.innerText=`TOO EARLY
Press to try again`;else if(d(),s?(B(n,!0),o.innerText=`${n}ms (penalty: +${P}ms)
Press to continue`):(B(n),o.innerText=`${n}ms
Press to continue`),r.length>=7){const a=Math.min(...r),i=Math.max(...r),c=r.indexOf(a),M=r.indexOf(i),A=r.filter((F,m)=>m!==c&&m!==M),K=A.reduce((F,m)=>F+m,0)/A.length;k(c,!0),k(M,!0),o.innerText=`Average: ${K.toFixed(2)}ms
Press Reset to try again`}}o.addEventListener("pointerdown",()=>{r.length<7&&b()});W.addEventListener("click",I);document.addEventListener("keydown",e=>{if(!e.repeat){if(e.code=="Space"&&r.length<7){b();return}if(e.code=="KeyR"){I();return}if(e.code.startsWith("Key")&&"ABCDEFGHIJKLMNOPQRSTUVWXYZ".includes(e.code.charAt(3))&&!"RIBL".includes(e.code.charAt(3))&&r.length<7){b();return}}});
