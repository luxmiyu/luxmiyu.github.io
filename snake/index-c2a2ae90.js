(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const I of c.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&n(I)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();const L=[{dark:"eaeaea",light:"2a2a2a",name:"text"},{dark:"bababa",light:"5a5a5a",name:"text-secondary"},{dark:"cd435c",light:"e86880",name:"selection"},{dark:"eaeaea",light:"2a2a2a",name:"selection-text"},{dark:"1a1a1a",light:"eaeaea",name:"background"},{dark:"222222",light:"dedede",name:"background-accent"},{dark:"3a3a3a",light:"d2d2d2",name:"shadow"},{dark:"8a8a8a",light:"8a8a8a",name:"hr"},{dark:"2a2a2a",light:"d8d8d8",name:"button"},{dark:"bababa",light:"5a5a5a",name:"button-border"},{dark:"3a3a3a",light:"eaeaea",name:"button-hover"},{dark:"5a5a5a",light:"fafafa",name:"button-active"},{dark:"8a8a8a",light:"fafafa",name:"button-disabled"},{dark:"2a2a2a",light:"d8d8d8",name:"input"},{dark:"5a5a5a",light:"8a8a8a",name:"input-border"},{dark:"eaeaea",light:"5a5a5a",name:"scrollbar-thumb"},{dark:"1a1a1a",light:"eaeaea",name:"scrollbar-track"},{dark:"bababa",light:"eaeaea",name:"range"},{dark:"3a3a3a",light:"aaaaaa",name:"range-border"},{dark:"3a3a3a",light:"aaaaaa",name:"range-background"},{dark:"e26f80",light:"f4899d",name:"checkbox-background"},{dark:"1e1e1e",light:"e7e7e7",name:"board-a"},{dark:"212121",light:"e0e0e0",name:"board-b"},{dark:"3c4857",light:"aabcd4",name:"snake"},{dark:"2972d2",light:"1256b0",name:"head"},{dark:"bababa",light:"5a5a5a",name:"wall"},{dark:"d2405b",light:"cd435c",name:"food"}],y=document.getElementById("theme-toggle");y&&y.addEventListener("click",()=>{v()});document.addEventListener("keydown",e=>{e.altKey&&e.key==="l"&&v()});function v(){localStorage.setItem("theme",localStorage.getItem("theme")==="dark"?"light":"dark"),$()}let C="";function $(){let e=localStorage.getItem("theme")==="light"?"light":"dark";localStorage.setItem("theme",e),y&&(e==="dark"?y.innerHTML="switch to light theme ðŸŒž":y.innerHTML="switch to dark theme ðŸŒš");for(let t in L){let a=L[t].name,n=L[t][e];document.documentElement.style.setProperty(`--color-${a}`,`#${n}`)}C=e}$();setInterval(()=>{C!==localStorage.getItem("theme")&&$()},500);const w=document.getElementById("pause"),P=document.getElementById("board"),A=document.getElementById("score"),B=document.getElementById("buttons"),R=document.getElementById("up"),H=document.getElementById("down"),V=document.getElementById("left"),j=document.getElementById("right"),M=document.getElementById("check-controls"),S=document.getElementById("keyboard-controls"),l=17,U=7,r=[],u=[],k=[],p=[];let b=0,O=3,d=4,s="right",E=!0;function G(e){switch(e){case"up":return{x:0,y:-1};case"down":return{x:0,y:1};case"left":return{x:-1,y:0};case"right":return{x:1,y:0}}}function W(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Z(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function _(){for(let e=0;e<l;e++)for(let t=0;t<l;t++){const a=document.createElement("div");a.id=`cell-${t}-${e}`,a.classList.add("cell");const n=document.createElement("div");n.classList.add("head"),n.id=`head-${t}-${e}`,a.appendChild(n),n.style.opacity="0",P.appendChild(a)}}function q(e,t){return document.getElementById(`cell-${e}-${t}`)}function f(e,t,a){const n=q(e,t);n&&(n.className=`cell ${a}`)}function z(e,t){return document.getElementById(`head-${e}-${t}`)}function T(e,t,a){const n=z(e,t);n&&(n.style.opacity=`${a}`)}function m(e,t){r.push({x:e,y:t})}function J(e){r.splice(0,e)}function D(){for(let e=0;e<l;e++)for(let t=0;t<l;t++)f(t,e,""),T(t,e,0);for(let e=0;e<r.length;e++){const{x:t,y:a}=r[e];f(t,a,e===r.length-1?"head":"snake"),T(t,a,e/r.length)}for(const{x:e,y:t}of u)f(e,t,"food");for(const{x:e,y:t}of k)f(e,t,"wall")}function h(e,t){return!(r.some(({x:a,y:n})=>a===e&&n===t)||u.some(({x:a,y:n})=>a===e&&n===t)||k.some(({x:a,y:n})=>a===e&&n===t)||e<0||e>=l||t<0||t>=l)}function g(e,t){return u.some(({x:a,y:n})=>a===e&&n===t)}function Q(e,t){return r.some(({x:a,y:n})=>a===e&&n===t)||k.some(({x:a,y:n})=>a===e&&n===t)||e<0||e>=l||t<0||t>=l}function X(e,t){let a=0;return h(e-1,t)||a++,h(e+1,t)||a++,h(e,t-1)||a++,h(e,t+1)||a++,a>=3}function Y(e,t){return!!(g(e-1,t)||g(e+1,t)||g(e,t-1)||g(e,t+1))}function x(){let e=-1,t=-1;for(;!h(e,t)||X(e,t);)e=Math.floor(Math.random()*l),t=Math.floor(Math.random()*l);u.push({x:e,y:t})}function ee(){let e=-1,t=-1;const a=r[r.length-1];for(;!h(e,t)||e===a.x||t===a.y||Z(a,{x:e,y:t})<5||Y(e,t);)e=Math.floor(Math.random()*l),t=Math.floor(Math.random()*l);k.push({x:e,y:t})}function F(){O=.15*(d-4)+4}_();function te(){r.length=0,u.length=0,k.length=0,p.length=0,b=0,d=4,s="right",A.innerText=`Score: ${b}`,F();for(let e=0;e<l;e++)for(let t=0;t<l;t++)f(t,e,"");m(5,8),m(6,8),m(7,8),m(8,8),x(),D()}function ae(e){return s==="up"&&e!=="up"&&e!=="down"||s==="down"&&e!=="up"&&e!=="down"||s==="left"&&e!=="left"&&e!=="right"||s==="right"&&e!=="left"&&e!=="right"}function K(){let e=p.shift();for(;e&&!ae(e);)e=p.shift();e&&(s=e);const t=W(r[r.length-1],G(s));if(E||Q(t.x,t.y)){E=!0,w.style.display="grid",w.innerText=`GAME OVER
Score: ${b}`;return}g(t.x,t.y)&&(d++,b++,F(),x(),u.splice(u.findIndex(({x:a,y:n})=>a===t.x&&n===t.y),1),A.innerText=`Score: ${b}`,d%20===0&&x(),d%3===0&&ee()),m(t.x,t.y),r.length>d&&J(r.length-d),D(),setTimeout(K,1e3/O)}function N(){E=!1,w.style.display="none",te(),K()}w.onclick=()=>N();function i(e){p.length>=U||p.push(e)}document.addEventListener("keydown",e=>{if(!e.repeat)switch(e.code){case"ArrowUp":case"KeyW":i("up");break;case"ArrowDown":case"KeyS":i("down");break;case"ArrowLeft":case"KeyA":i("left");break;case"ArrowRight":case"KeyD":i("right");break;case"Space":E&&N();break}});R.onclick=()=>i("up");H.onclick=()=>i("down");V.onclick=()=>i("left");j.onclick=()=>i("right");M.onchange=()=>{M.checked?(B.classList.remove("hidden"),S.classList.add("hidden")):(B.classList.add("hidden"),S.classList.remove("hidden"))};
